<template name="layout">
    {{#if currentUser}}
        {{> autoformModals}}
        {{> PrivateLayout}}
    {{else}}
        {{> PublicLayout}}
    {{/if}}
</template>

<template name="PublicLayout">
    <div id="wrap">
        <div class="navbar navbar-fixed-top navbar-default" role="navigation">
            <div class="navbar-container container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">
              Toggle navigation
            </span>
            <span class="icon-bar">
            </span>
            <span class="icon-bar">
            </span>
            <span class="icon-bar">
            </span>
                    </button>
                    <a class="navbar-brand" href="{{pathFor 'home_private'}}">
                        <img id="logo" src="/images/insonic-logo.png">
                    </a>
                </div>
                <div id="menu" class="collapse navbar-collapse">
                    {{> PublicLayoutLeftMenu}}{{> PublicLayoutRightMenu}}
                </div>
            </div>
        </div>
        <div class="navbar-spacer">
        </div>

        {{> yield}}
    </div>
    <div id="footer">
        <div class="footer-container container">
            <p class="text-muted">
            </p>
        </div>
    </div>

</template>

<template name="PublicLayoutLeftMenu">
    <ul id="menu-items" class="nav navbar-nav">
        <li id="menu-item-simple" class="{{menuItemClass 'home_public'}}">
            <a href="{{pathFor 'home_public'}}">
                Home
            </a>
        </li>
    </ul>
</template>

<template name="PublicLayoutRightMenu">
    <!-- <ul id="menu-items" class="nav navbar-nav navbar-right">
    <li id="menu-item-simple" class="{{menuItemClass 'register'}}">
      <a href="{{pathFor 'register'}}">
				Register
			</a>
    </li>
    <li id="menu-item-simple" class="{{menuItemClass 'login'}}">
      <a href="{{pathFor 'login'}}">
				Login
			</a>
    </li>
  </ul>-->
</template>

<template name="PrivateLayout">
    <div id="wrap">
        <div class="navbar navbar-fixed-top navbar-default" role="navigation">
            <div class="navbar-container container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">
              Toggle navigation
            </span>
            <span class="icon-bar">
            </span>
            <span class="icon-bar">
            </span>
            <span class="icon-bar">
            </span>
                    </button>
                    <a class="navbar-brand" href="{{pathFor 'home_private'}}">
                        <img id="logo" src="/images/insonic-logo.png">
                    </a>
                </div>
                <div id="menu" class="collapse navbar-collapse">
                    {{> PrivateLayoutLeftMenu}}{{> PrivateLayoutRightMenu}}
                </div>
            </div>
        </div>
        <div class="navbar-spacer">
        </div>

        {{> yield}}
    </div>
    <div id="footer">
        <div class="footer-container container">
            <div class="navbar navbar-default navbar-fixed-bottom">
                <div class="container">
                    <div class="col-md-6">{{> PrivateLayoutBottomLeftMenu}}</div>
                    <div class="col-md-6">{{> AudioPlayer}}</div>
                </div>
            </div>
        </div>
    </div>

        <!--<div class="modal" id="newSong" tabindex="-1" role="dialog" aria-labelledby="newSongLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				{{> quickForm collection="Songs" type="insert"}}
{{#autoForm id="songModal" type='insert' collection="Songs"}}
    {{> afFileUpload name="audioUpload" collection='Images'}}
					<button type="submit" class="btn btn-primary">Submit</button>
				{{ /autoForm }}

			</div>
		</div>
	</div>-->
        <!-- /modal -->


    </template>

    <template name="PrivateLayoutLeftMenu">
        <ul id="menu-items" class="nav navbar-nav">
            <li id="menu-item-simple" class="{{menuItemClass 'home_private'}}">
                <a href="{{pathFor 'home_private'}}">
                    Home
                </a>
            </li>

        </ul>
    </template>

    <template name="PrivateLayoutRightMenu">
    <ul id="menu-items" class="nav navbar-nav navbar-right">
        <li id="menu-item-simple" class="{{menuItemClass 'songs'}}">
            <a href="{{pathFor 'songs'}}">
                Songs <span class="glyphicon glyphicon-music" aria-hidden="true"></span>
            </a>
        </li>
        <li id="menu-item-simple" class="{{menuItemClass 'new_messages'}}">
            <a href="{{pathFor 'new_messages'}}">
                Messages <span class="glyphicon glyphicon-envelope" aria-hidden="true"></span>
            </a>
        </li>
        <li id="menu-item-simple" class="{{menuItemClass 'requests'}}">
            <a href="{{pathFor 'requests'}}">
                Requests <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
            </a>
        </li>
    {{> notificationsDropdown}}
        <li id="menu-item-dropdown" class="dropdown ">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Add New
                <b class="caret">
                </b>
            </a>
            <ul id="menu-items" class="dropdown-menu">
                <li class="active">
                    {{#afModal class="btn btn-primary" collection="Songs" operation="insert" omitFields="author,ownerId,createdAt,likes"}}
                        Song {{/afModal}}
                </li>
                <li class="active">
                    {{#afModal class="btn btn-primary" collection="Ads" operation="insert" omitFields="ownerId,createdAt"}}
                        Performance Ad {{/afModal}}
                </li>
            </ul>
        </li>

        <li id="menu-item-simple" class="{{menuItemClass 'admin'}}">
            <a href="{{pathFor 'admin'}}">
                Admin
            </a>
        </li>
    <li id="menu-item-dropdown" class="dropdown ">
    <a href="#" class="dropdown-toggle" data-toggle="dropdown">

    {{ #if currentUser.services.facebook }}
        <img id="nav_pro_pic" src="http://graph.facebook.com/{{ userFBImage }}/picture/?type=small" alt="...">
        {{ currentUser.services.facebook.name }}
    {{ else }}
        <img id="nav_pro_pic" src="/images/profile/avatar.png" alt="...">
        {{ currentUser.username }}
    {{ /if }}
        <b class="caret">
        </b>
    </a>
        <ul id="menu-items" class="dropdown-menu">
            <li class="{{menuItemClass 'user_settings'}}">
                <a href="{{pathFor 'user_settings'}}">
                    Settings
                </a>
            </li>
            <li class="{{menuItemClass 'logout'}}">
                <a href="{{pathFor 'logout'}}">
                    Logout
                </a>
            </li>
        </ul>
    </li>
    </ul>
    </template>

    <template name="PrivateLayoutBottomLeftMenu">
        <ul id="menu-items" class="nav navbar-nav navbar-left">
            <li id="menu-item-simple" class="{{menuItemClass 'spotlight'}}">
                <a href="{{pathFor 'spotlight'}}">
                    Spotlight
                </a>
            </li>
            <li id="menu-item-simple" class="{{menuItemClass 'rez_radio'}}">
                <a href="{{pathFor 'rez_radio'}}">
                    Rez Radio
                </a>
            </li>
            <li id="menu-item-simple" class="{{menuItemClass 'ads'}}">
                <a href="{{pathFor 'ads'}}">
                    Performance Ads
                </a>
            </li>
        </ul>
    </template>

    <template name="AudioPlayer">

        <div class="sm2-bar-ui">
            <div class="bd sm2-playlist-drawer sm2-element">

                <div class="sm2-inline-texture">
                    <div class="sm2-box-shadow"></div>
                </div>
                <!-- playlist content is mirrored here -->
                <div class="sm2-playlist-wrapper">
                    <ul class="sm2-playlist-bd">
                        <li><a href="http://freshly-ground.com/data/audio/sm2/The%20Fugitives%20-%20Graffiti%20Sex.mp3"><b>SonReal</b> - LA<span class="label">Explicit</span></a>
                        </li>
                        <li><a href="/music/song2.mp3"><b>Song 2</b>
                            - People Asking <span class="label">Explicit</span></a>
                        </li>
                        <li>
                            <a href="/music/song3.mp3"><b>SonReal</b>
                                - Already There Remix ft. Rich Kidd, Saukrates <span class="label">Explicit</span></a>
                        </li>
                        <li><a href="http://freshly-ground.com/data/audio/sm2/The%20Fugitives%20-%20Graffiti%20Sex.mp3"><b>The
                             Fugitives</b> - Graffiti Sex</a>
                         </li>
                         <li>
                             <a href="http://freshly-ground.com/data/audio/sm2/Adrian%20Glynn%20-%20Seven%20Or%20Eight%20Days.mp3"><b>Adrian
                                 Glynn</b> - Seven Or Eight Days</a>
                         </li>
                         <li>
                             <a href="http://freshly-ground.com/data/audio/sm2/SonReal%20-%20I%20Tried.mp3"><b>SonReal</b>
                                 - I Tried</a>
                         </li>
                    </ul>
                </div>

                <div class="sm2-extra-controls">
                    <div class="bd">
                        <div class="sm2-inline-element sm2-button-element">
                            <a href="#prev" title="Previous" class="sm2-inline-button previous">&lt; previous</a>
                        </div>

                        <div class="sm2-inline-element sm2-button-element">
                            <a href="#next" title="Next" class="sm2-inline-button next">&gt; next</a>
                        </div>
                        <!--
                          <div class="sm2-inline-element sm2-button-element disabled">
                          <a href="#repeat" title="Repeat playlist" class="sm2-inline-button repeat">&infin; repeat</a>
                        </div>
                        <div class="sm2-inline-element sm2-button-element disabled">
                        <a href="#shuffle" title="Shuffle" class="sm2-inline-button shuffle">shuffle</a>
                      </div>
                        -->

                    </div>

                </div>

            </div>

            <div class="bd sm2-main-controls">
                <div class="sm2-inline-texture"></div>
                <div class="sm2-inline-gradient"></div>
                <div class="sm2-inline-element sm2-button-element">
                    <div class="sm2-button-bd">
                        <a href="#play" class="sm2-inline-button play-pause">Play / pause</a>
                    </div>
                </div>
                <div class="sm2-inline-element sm2-inline-status">
                    <div class="sm2-playlist">
                        <div class="sm2-playlist-target">
                            <!-- playlist <ul> + <li> markup will be injected here -->
                            <!-- if you want default / non-JS content, you can put that here. -->
                            <noscript>
                                <p>JavaScript is required.</p>
                            </noscript>
                        </div>
                    </div>

                    <div class="sm2-progress">
                        <div class="sm2-row">
                            <div class="sm2-inline-time">0:00</div>
                            <div class="sm2-progress-bd">
                                <div class="sm2-progress-track">
                                    <div class="sm2-progress-bar"></div>
                                    <div class="sm2-progress-ball">
                                        <div class="icon-overlay"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="sm2-inline-duration">0:00</div>
                        </div>
                    </div>

                </div>

                <div class="sm2-inline-element sm2-button-element sm2-volume">
                    <div class="sm2-button-bd">
                        <span class="sm2-inline-button sm2-volume-control volume-shade"></span>
                        <a href="#volume" class="sm2-inline-button sm2-volume-control">volume</a>
                    </div>
                </div>

                <div class="sm2-inline-element sm2-button-element">
                    <div class="sm2-button-bd">
                        <a href="#prev" title="Previous" class="sm2-inline-button previous">&lt; previous</a>
                    </div>
                </div>

                <div class="sm2-inline-element sm2-button-element">
                    <div class="sm2-button-bd">
                        <a href="#next" title="Next" class="sm2-inline-button next">&gt; next</a>
                    </div>
                </div>

                <div class="sm2-inline-element sm2-button-element sm2-menu">
                    <div class="sm2-button-bd">
                        <a href="#menu" class="sm2-inline-button menu">menu</a>
                    </div>
                </div>

            </div>
        </div>

    </template>